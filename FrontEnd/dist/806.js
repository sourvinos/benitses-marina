"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[806],{7806:(Q,g,i)=>{i.r(g),i.d(g,{BerthModule:()=>U});var h=i(33),b=i(2676),d=i(9417),e=i(4438),v=i(2079),f=i(3979),C=i(5018),F=i(1572),k=i(9790),R=i(7028),j=i(8934),B=i(2182),u=i(177),A=i(4433),y=i(285),S=i(8834),M=i(9213),D=i(5779),L=i(405),I=i(5901),c=i(8520),T=i(4435);const N=["table"];function E(l,p){if(1&l){const t=e.RV6();e.j41(0,"tr"),e.nrm(1,"th",24),e.j41(2,"th",25),e.EFF(3),e.k0s(),e.j41(4,"th",26),e.EFF(5),e.k0s(),e.j41(6,"th",27),e.EFF(7),e.k0s(),e.j41(8,"th",28),e.EFF(9),e.k0s(),e.j41(10,"th",29),e.EFF(11),e.k0s(),e.j41(12,"th",30),e.EFF(13),e.k0s()(),e.j41(14,"tr")(15,"th",31),e.nrm(16,"p-tableHeaderCheckbox"),e.k0s(),e.j41(17,"th",32)(18,"p-columnFilter",33),e.bIt("input",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onFilter(o.target.value,"berth","contains"))}),e.k0s()(),e.j41(19,"th",34)(20,"p-columnFilter",35),e.bIt("input",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onFilter(o.target.value,"boatName","contains"))}),e.k0s()(),e.j41(21,"th",32),e.nrm(22,"p-columnFilter",36),e.k0s(),e.j41(23,"th",32),e.nrm(24,"p-columnFilter",37),e.k0s(),e.j41(25,"th",32),e.nrm(26,"p-columnFilter",38),e.k0s(),e.j41(27,"th",32)(28,"p-columnFilter",39),e.bIt("input",function(o){e.eBV(t);const a=e.XpG();return e.Njj(a.onFilter(o.target.value,"toDate","contains"))}),e.k0s()()()}if(2&l){const t=e.XpG();e.R7$(3),e.JRh(t.getLabel("headerDescription")),e.R7$(2),e.JRh(t.getLabel("headerBoatName")),e.R7$(2),e.JRh(t.getLabel("headerIsDryDock")),e.R7$(2),e.JRh(t.getLabel("headerIsAthenian")),e.R7$(2),e.JRh(t.getLabel("headerIsFishingBoat")),e.R7$(2),e.JRh(t.getLabel("headerToDate"))}}function O(l,p){if(1&l){const t=e.RV6();e.j41(0,"tr",40),e.bIt("click",function(){const o=e.eBV(t).$implicit,a=e.XpG();return e.Njj(a.onHighlightRow(o.id))}),e.j41(1,"td",41)(2,"span",42),e.nrm(3,"p-tableCheckbox",43),e.k0s()(),e.j41(4,"td",44)(5,"span",45),e.EFF(6),e.k0s()(),e.j41(7,"td",46)(8,"span")(9,"mat-icon",47),e.EFF(10),e.k0s(),e.EFF(11),e.k0s()(),e.j41(12,"td",44)(13,"span",48)(14,"mat-icon",49),e.EFF(15),e.k0s()()(),e.j41(16,"td",44)(17,"span",48)(18,"mat-icon",49),e.EFF(19),e.k0s()()(),e.j41(20,"td",44)(21,"span",48)(22,"mat-icon",49),e.EFF(23),e.k0s()()(),e.j41(24,"td",44)(25,"span",50),e.EFF(26),e.k0s()()()}if(2&l){const t=p.$implicit,r=e.XpG();e.Y8G("pContextMenuRow",t),e.BMQ("id",t.id),e.R7$(3),e.Y8G("value",t),e.R7$(3),e.JRh(t.berth),e.R7$(3),e.Y8G("ngClass",r.getColor(t.boatName,t.isDryDock)),e.R7$(),e.JRh(r.getIcon()),e.R7$(),e.JRh(r.getBoatName(t.boatName)),e.R7$(4),e.JRh(r.getStar(t.isDryDock)),e.R7$(4),e.JRh(r.getStar(t.isAthenian)),e.R7$(4),e.JRh(r.getStar(t.isFishingBoat)),e.R7$(3),e.JRh(r.formatDateToLocale(t.toDate,!1,!0,!0))}}let G=(()=>{class l{constructor(t,r,o,a,s,n,Y,x,z,W,K){this.activatedRoute=t,this.cryptoService=r,this.dateHelperService=o,this.dialogService=a,this.emojiService=s,this.formBuilder=n,this.helperService=Y,this.messageDialogService=x,this.messageLabelService=z,this.router=W,this.sessionStorageService=K,this.url="berths",this.feature="berthAvailableList",this.featureIcon="berths",this.icon="home",this.parentUrl="/home",this.records=[],this.recordsFilteredCount=0,this.selectedRecords=[],this.isOccupied=0,this.isAvailable=0,this.isAthenian=0,this.isFishingBoat=0,this.isDryDock=0,this.berthAvailabilityOptions=[{label:"All",value:"all"},{label:"Occupied",value:"occupied"},{label:"Available",value:"available"}]}ngOnInit(){this.initForm(),this.loadRecords().then(()=>{this.isOccupied=this.records.filter(t=>"AVAILABLE"!=t.boatName).length,this.isAvailable=this.records.filter(t=>"AVAILABLE"==t.boatName).length+this.records.filter(t=>t.isDryDock).length,this.isAthenian=this.records.filter(t=>t.isAthenian).length,this.isFishingBoat=this.records.filter(t=>t.isFishingBoat).length,this.isDryDock=this.records.filter(t=>t.isDryDock).length,this.setSidebarsHeight()})}filterBySelection(){"all"==this.form.value.value&&this.helperService.clearTableTextFilters(this.table,["description","boatName","toDate"]),"occupied"==this.form.value.value&&this.table.filter("AVAILABLE","boatName","notEquals"),"available"==this.form.value.value&&this.table.filter("AVAILABLE","boatName","equals")}formatDateToLocale(t,r,o,a){return a&&"2199-12-31"==t?"":this.dateHelperService.formatISODateToLocale(t,r,o)}getKnobBackgroundColor(){return"LightSlateGray"}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}getYesOrNo(t){return t?"YES":""}getBoatName(t){return"\xa0"+t}getColor(t,r){return"AVAILABLE"===t?"green":r?"orange":"red"}getIcon(){return"adjust"}getStar(t){return t?"star":""}isAdmin(){return"true"==this.cryptoService.decrypt(this.sessionStorageService.getItem("isAdmin"))}onFilter(t,r,o){t&&this.table.filter(t,r,o)}onFilterRecords(t){this.sessionStorageService.saveItem(this.feature+"-filters",JSON.stringify(this.table.filters)),this.recordsFilteredCount=t.filteredValue.length}onHighlightRow(t){this.helperService.highlightRow(t)}onNewRecord(){this.router.navigate([this.url+"/new"])}onResetTableFilters(){this.helperService.clearTableTextFilters(this.table,["description","boatName","toDate"])}goBack(){this.router.navigate([this.parentUrl])}initForm(){this.form=this.formBuilder.group({value:new d.MJ("all")})}loadRecords(){return new Promise(t=>{const r=this.activatedRoute.snapshot.data[this.feature];null==r.error?(this.records=r.list,this.recordsFilteredCount=this.records.length,t(this.records)):this.dialogService.open(this.messageDialogService.filterResponse(r.error),"error",["ok"]).subscribe(()=>{this.goBack()})})}setSidebarsHeight(){this.helperService.setSidebarsTopMargin("0")}static{this.\u0275fac=function(r){return new(r||l)(e.rXU(h.nX),e.rXU(v.j),e.rXU(f.c),e.rXU(C.o),e.rXU(F.E),e.rXU(d.ok),e.rXU(k.wT),e.rXU(R.$),e.rXU(j.F),e.rXU(h.Ix),e.rXU(B.R))}}static{this.\u0275cmp=e.VBU({type:l,selectors:[["berth-available-list"]],viewQuery:function(r,o){if(1&r&&e.GBs(N,5),2&r){let a;e.mGM(a=e.lsd())&&(o.table=a.first)}},decls:39,vars:44,consts:[["table",""],["id","list-wrapper"],["id","content"],["id","header"],[3,"featureIcon","feature","icon","parentUrl"],[3,"formGroup"],["formControlName","value","optionLabel","label","optionValue","value",3,"click","options"],["id","knobs-and-table"],["id","knobs"],[1,"knob"],[1,"label"],["textColor","var(--color-text)","valueColor","#e3283a",3,"ngModelChange","ngModel","disabled","rangeColor","size","strokeWidth"],["textColor","var(--color-text)","valueColor","#28e3d1",3,"ngModelChange","ngModel","disabled","rangeColor","size","strokeWidth"],["textColor","var(--color-text)","valueColor","#f3bf08",3,"ngModelChange","ngModel","disabled","rangeColor","size","strokeWidth"],["textColor","var(--color-text)","valueColor","#00ff80",3,"ngModelChange","ngModel","disabled","rangeColor","size","strokeWidth"],["textColor","var(--color-text)","valueColor","#80c9ff",3,"ngModelChange","ngModel","disabled","rangeColor","size","strokeWidth"],["id","table-wrapper"],["dataKey","id","scrollHeight","flex","selectionMode","single","sortMode","multiple",3,"onFilter","selectionChange","selection","scrollable","value","virtualScrollItemSize","virtualScroll"],["pTemplate","header"],["pTemplate","body"],["id","footer"],[3,"resetTableFilters","filteredRecordCount","mustShowSelectedFilteredCount","recordCount","selectedRecordCount"],["id","align-right"],["mat-flat-button","",1,"primary",3,"click","disabled"],[1,"no-border-bottom","width-3"],["pSortableColumn","berth",1,"no-border-bottom","width-6"],["pSortableColumn","boatName",1,"no-border-bottom","width-auto"],["pSortableColumn","isDryDock",1,"no-border-bottom","width-6"],["pSortableColumn","isAthenian",1,"no-border-bottom","width-6"],["pSortableColumn","isFishingBoat",1,"no-border-bottom","width-6"],["pSortableColumn","toDate",1,"no-border-bottom","width-6"],[1,"no-border-top","width-3"],[1,"no-border-top","width-6"],["field","berth",3,"input"],[1,"no-border-top","width-auto"],["field","boatName",3,"input"],["field","isDryDock","type","boolean"],["field","isAthenian","type","boolean"],["field","isFishingBoat","type","boolean"],["field","toDate",3,"input"],[2,"height","32px",3,"click","pContextMenuRow"],[1,"width-3"],[1,"center","no-overflow",2,"padding-top","0.25rem !important"],[3,"value"],[1,"width-6"],[1,"center"],[1,"width-auto"],[1,"material-icons-outlined",3,"ngClass"],[1,"center","no-left-padding","no-overflow"],[1,"material-icons-outlined","blue",2,"font-size","14px","margin-top","8px"],[1,"center","no-overflow"]],template:function(r,o){if(1&r){const a=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"home-button-and-title",4),e.j41(4,"form",5)(5,"p-selectButton",6),e.bIt("click",function(){return e.eBV(a),e.Njj(o.filterBySelection())}),e.k0s()()(),e.j41(6,"div",7)(7,"div",8)(8,"div",9)(9,"span",10),e.EFF(10,"Occupied"),e.k0s(),e.j41(11,"p-knob",11),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(o.isOccupied,n)||(o.isOccupied=n),e.Njj(n)}),e.k0s()(),e.j41(12,"div",9)(13,"span",10),e.EFF(14,"Available"),e.k0s(),e.j41(15,"p-knob",12),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(o.isAvailable,n)||(o.isAvailable=n),e.Njj(n)}),e.k0s()(),e.j41(16,"div",9)(17,"span",10),e.EFF(18,"DryDock"),e.k0s(),e.j41(19,"p-knob",13),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(o.isDryDock,n)||(o.isDryDock=n),e.Njj(n)}),e.k0s()(),e.j41(20,"div",9)(21,"span",10),e.EFF(22,"Fishing boats"),e.k0s(),e.j41(23,"p-knob",14),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(o.isFishingBoat,n)||(o.isFishingBoat=n),e.Njj(n)}),e.k0s()(),e.j41(24,"div",9)(25,"span",10),e.EFF(26,"Athenian"),e.k0s(),e.j41(27,"p-knob",15),e.mxI("ngModelChange",function(n){return e.eBV(a),e.DH7(o.isAthenian,n)||(o.isAthenian=n),e.Njj(n)}),e.k0s()()(),e.j41(28,"div",16)(29,"p-table",17,0),e.bIt("onFilter",function(n){return e.eBV(a),e.Njj(o.onFilterRecords(n))}),e.mxI("selectionChange",function(n){return e.eBV(a),e.DH7(o.selectedRecords,n)||(o.selectedRecords=n),e.Njj(n)}),e.DNE(31,E,29,6,"ng-template",18)(32,O,27,11,"ng-template",19),e.k0s()()()(),e.j41(33,"div",20)(34,"table-total-filtered-records",21),e.bIt("resetTableFilters",function(){return e.eBV(a),e.Njj(o.onResetTableFilters())}),e.k0s(),e.j41(35,"div",22)(36,"button",23),e.bIt("click",function(){return e.eBV(a),e.Njj(o.onNewRecord())}),e.EFF(37),e.nI1(38,"uppercase"),e.k0s()()()()}2&r&&(e.R7$(3),e.Y8G("featureIcon",o.featureIcon)("feature",o.feature)("icon",o.icon)("parentUrl",o.parentUrl),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(),e.Y8G("options",o.berthAvailabilityOptions),e.R7$(6),e.R50("ngModel",o.isOccupied),e.Y8G("disabled",!0)("rangeColor",o.getKnobBackgroundColor())("size",80)("strokeWidth",10),e.R7$(4),e.R50("ngModel",o.isAvailable),e.Y8G("disabled",!0)("rangeColor",o.getKnobBackgroundColor())("size",80)("strokeWidth",10),e.R7$(4),e.R50("ngModel",o.isDryDock),e.Y8G("disabled",!0)("rangeColor",o.getKnobBackgroundColor())("size",80)("strokeWidth",10),e.R7$(4),e.R50("ngModel",o.isFishingBoat),e.Y8G("disabled",!0)("rangeColor",o.getKnobBackgroundColor())("size",80)("strokeWidth",10),e.R7$(4),e.R50("ngModel",o.isAthenian),e.Y8G("disabled",!0)("rangeColor",o.getKnobBackgroundColor())("size",80)("strokeWidth",10),e.R7$(2),e.R50("selection",o.selectedRecords),e.Y8G("scrollable",!0)("value",o.records)("virtualScrollItemSize",32)("virtualScroll",!0),e.R7$(5),e.Y8G("filteredRecordCount",o.recordsFilteredCount)("mustShowSelectedFilteredCount",!0)("recordCount",o.records.length)("selectedRecordCount",o.selectedRecords.length),e.R7$(2),e.Y8G("disabled",!o.isAdmin()),e.R7$(),e.JRh(e.bMT(38,42,o.getLabel("newRecord"))))},dependencies:[u.YU,d.qT,d.BC,d.cb,d.vS,A.K,y.i,S.$z,M.An,D.Ei,L.N6,I.JC,c.XI,c.Tg,c.H$,c.S9,c.nA,c.rl,d.j4,d.JD,T.j,u.Pc],styles:["#list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#content[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6.5px);backdrop-filter:blur(6.5px);background-color:var(--color-background);border-radius:1rem;border:.0625rem solid color-mix(in srgb,var(--color-border) 50%,transparent);display:flex;flex-direction:column;gap:.9375rem;height:100%;margin:0 auto;overflow-y:hidden;padding:1rem 1.6rem 1rem 2rem;transition:background-color var(--theme-delay);width:100%}#header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin:0 2rem 0 0}#table-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}#footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:right;padding:.875rem 2rem}#align-right[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}","#header[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{margin-top:.125rem}#knobs-and-table[_ngcontent-%COMP%]{column-gap:2rem;display:flex;flex-direction:row;height:100%}#knobs[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;row-gap:.5rem}.knob[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}.knob[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--color-text);font-family:var(--font-family-fahkwang);font-size:.75rem;text-align:center;transition:all var(--theme-delay)}.blue[_ngcontent-%COMP%]{color:#34cbc5}.green[_ngcontent-%COMP%]{color:green}.orange[_ngcontent-%COMP%]{color:orange}.red[_ngcontent-%COMP%]{color:red}"]})}}return l})();var V=i(7673),w=i(6354),$=i(9437),m=i(1338),X=i(6086);const P=[{path:"",component:G,canActivate:[b.r],resolve:{berthAvailableList:(()=>{class l{constructor(t){this.berthHttpService=t}resolve(){return this.berthHttpService.getAvailable().pipe((0,w.T)(t=>new m.X(t)),(0,$.W)(t=>(0,V.of)(new m.X(null,t))))}static{this.\u0275fac=function(r){return new(r||l)(e.KVO(X.L))}}static{this.\u0275prov=e.jDH({token:l,factory:l.\u0275fac,providedIn:"root"})}}return l})()}}];let H=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[h.iI.forChild(P),h.iI]})}}return l})();var J=i(8330);let U=(()=>{class l{static{this.\u0275fac=function(r){return new(r||l)}}static{this.\u0275mod=e.$C({type:l})}static{this.\u0275inj=e.G2t({imports:[J.G,H]})}}return l})()}}]);