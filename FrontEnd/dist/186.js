"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[186],{8186:(Y,h,n)=>{n.r(h),n.d(h,{InsurancePolicyModule:()=>O});var c=n(33),m=n(2676),e=n(4438),v=n(2079),g=n(3979),f=n(5018),b=n(1572),y=n(9790),S=n(7028),F=n(8934),C=n(2182),I=n(4433),R=n(5779),a=n(8520),T=n(4435);const j=["table"];function P(r,p){if(1&r){const t=e.RV6();e.j41(0,"tr"),e.nrm(1,"th",11),e.j41(2,"th",12),e.EFF(3),e.k0s(),e.j41(4,"th",13),e.EFF(5),e.k0s()(),e.j41(6,"tr")(7,"th",14),e.nrm(8,"p-tableHeaderCheckbox"),e.k0s(),e.j41(9,"th",15)(10,"p-columnFilter",16),e.bIt("input",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onFilter(o.target.value,"boatName","contains"))}),e.k0s()(),e.j41(11,"th",17)(12,"p-columnFilter",18),e.bIt("input",function(o){e.eBV(t);const s=e.XpG();return e.Njj(s.onFilter(o.target.value,"policyEnds","contains"))}),e.k0s()()()}if(2&r){const t=e.XpG();e.R7$(3),e.JRh(t.getLabel("headerBoatName")),e.R7$(2),e.JRh(t.getLabel("headerInsuranceEnds"))}}function E(r,p){if(1&r){const t=e.RV6();e.j41(0,"tr",19),e.bIt("click",function(){const o=e.eBV(t).$implicit,s=e.XpG();return e.Njj(s.onHighlightRow(o.reservationId))}),e.j41(1,"td",20)(2,"span",21),e.nrm(3,"p-tableCheckbox",22),e.k0s()(),e.j41(4,"td",23)(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"td",24)(8,"span",25),e.EFF(9),e.k0s()()()}if(2&r){const t=p.$implicit,i=e.XpG();e.BMQ("id",t.reservationId),e.R7$(3),e.Y8G("value",t),e.R7$(3),e.JRh(t.boatName),e.R7$(3),e.JRh(i.formatDateToLocale(t.policyEnds,!1,!0))}}let L=(()=>{class r{constructor(t,i,o,s,d,l,$,k,A,J){this.activatedRoute=t,this.cryptoService=i,this.dateHelperService=o,this.dialogService=s,this.emojiService=d,this.helperService=l,this.messageDialogService=$,this.messageLabelService=k,this.router=A,this.sessionStorageService=J,this.url="insurancePolicies",this.feature="upcominginsurancesList",this.featureIcon="insurance-policies",this.icon="home",this.parentUrl="/home",this.records=[],this.recordsFilteredCount=0,this.selectedRecords=[]}ngOnInit(){this.loadRecords(),this.setTabTitle(),this.setSidebarsHeight()}ngAfterViewInit(){setTimeout(()=>{this.getVirtualElement(),this.scrollToSavedPosition(),this.enableDisableFilters()},500)}formatDateToLocale(t,i=!1,o=!1,s=!1){return s&&"2199-12-31"==t?"":this.dateHelperService.formatISODateToLocale(t,i,o)}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}getOverdueDescription(t){return t?"YES":""}isAdmin(){return"true"==this.cryptoService.decrypt(this.sessionStorageService.getItem("isAdmin"))}onFilter(t,i,o){t&&this.table.filter(t,i,o)}onFilterRecords(t){this.sessionStorageService.saveItem(this.feature+"-filters",JSON.stringify(this.table.filters)),this.recordsFilteredCount=t.filteredValue.length}onHighlightRow(t){this.helperService.highlightRow(t)}onNewRecord(){this.router.navigate([this.url+"/new"])}onResetTableFilters(){this.helperService.clearTableTextFilters(this.table,["description","email","phones"])}enableDisableFilters(){0==this.records.length?this.helperService.disableTableFilters():this.helperService.enableTableFilters()}getVirtualElement(){this.virtualElement=document.getElementsByClassName("p-scroller-inline")[0]}goBack(){this.router.navigate([this.parentUrl])}loadRecords(){return new Promise(t=>{const i=this.activatedRoute.snapshot.data[this.feature];null==i.error?(this.records=i.list,this.recordsFilteredCount=this.records.length,t(this.records)):this.dialogService.open(this.messageDialogService.filterResponse(i.error),"error",["ok"]).subscribe(()=>{this.goBack()})})}scrollToSavedPosition(){this.helperService.scrollToSavedPosition(this.virtualElement,this.feature)}setSidebarsHeight(){this.helperService.setSidebarsTopMargin("0")}setTabTitle(){this.helperService.setTabTitle(this.feature)}static{this.\u0275fac=function(i){return new(i||r)(e.rXU(c.nX),e.rXU(v.j),e.rXU(g.c),e.rXU(f.o),e.rXU(b.E),e.rXU(y.wT),e.rXU(S.$),e.rXU(F.F),e.rXU(c.Ix),e.rXU(C.R))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["insurance-policy-list"]],viewQuery:function(i,o){if(1&i&&e.GBs(j,5),2&i){let s;e.mGM(s=e.lsd())&&(o.table=s.first)}},decls:11,vars:13,consts:[["table",""],["id","list-wrapper"],["id","content"],["id","header"],[3,"featureIcon","feature","icon","parentUrl"],["id","table-wrapper"],["dataKey","reservationId","scrollHeight","flex","selectionMode","single","sortMode","multiple",3,"onFilter","selectionChange","selection","scrollable","value","virtualScrollItemSize","virtualScroll"],["pTemplate","header"],["pTemplate","body"],["id","footer"],[3,"resetTableFilters","filteredRecordCount","mustShowSelectedFilteredCount","recordCount","selectedRecordCount"],[1,"no-border-bottom","width-3"],["pSortableColumn","boatName",1,"no-border-bottom","width-auto"],["pSortableColumn","policyEnds",1,"no-border-bottom","width-7"],[1,"no-border-top","width-3"],[1,"no-border-top","width-auto"],["field","boatName",3,"input"],[1,"no-border-top","width-7"],["field","policyEnds",3,"input"],[2,"height","32px",3,"click"],[1,"width-3"],[1,"center","no-overflow",2,"padding-right","0 !important","padding-top","0.25rem !important"],[3,"value"],[1,"width-auto"],[1,"width-7"],[1,"center","no-overflow"]],template:function(i,o){if(1&i){const s=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"home-button-and-title",4),e.k0s(),e.j41(4,"div",5)(5,"p-table",6,0),e.bIt("onFilter",function(l){return e.eBV(s),e.Njj(o.onFilterRecords(l))}),e.mxI("selectionChange",function(l){return e.eBV(s),e.DH7(o.selectedRecords,l)||(o.selectedRecords=l),e.Njj(l)}),e.DNE(7,P,13,2,"ng-template",7)(8,E,10,4,"ng-template",8),e.k0s()()(),e.j41(9,"div",9)(10,"table-total-filtered-records",10),e.bIt("resetTableFilters",function(){return e.eBV(s),e.Njj(o.onResetTableFilters())}),e.k0s()()()}2&i&&(e.R7$(3),e.Y8G("featureIcon",o.featureIcon)("feature",o.feature)("icon",o.icon)("parentUrl",o.parentUrl),e.R7$(2),e.R50("selection",o.selectedRecords),e.Y8G("scrollable",!0)("value",o.records)("virtualScrollItemSize",32)("virtualScroll",!0),e.R7$(5),e.Y8G("filteredRecordCount",o.recordsFilteredCount)("mustShowSelectedFilteredCount",!0)("recordCount",o.records.length)("selectedRecordCount",o.selectedRecords.length))},dependencies:[I.K,R.Ei,a.XI,a.Tg,a.S9,a.nA,a.rl,T.j],styles:["#list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#content[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6.5px);backdrop-filter:blur(6.5px);background-color:var(--color-background);border-radius:1rem;border:.0625rem solid color-mix(in srgb,var(--color-border) 50%,transparent);display:flex;flex-direction:column;gap:.9375rem;height:100%;margin:0 auto;overflow-y:hidden;padding:1rem 1.6rem 1rem 2rem;transition:background-color var(--theme-delay);width:100%}#header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin:0 2rem 0 0}#table-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}#footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:right;padding:.875rem 2rem}#align-right[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}","#footer[_ngcontent-%COMP%]{justify-content:left!important}"]})}}return r})();var X=n(7673),w=n(6354),U=n(9437),u=n(1338),V=n(97),M=n(5312),N=n(1626);let G=(()=>{class r extends V.s{constructor(t){super(t,M.c.apiUrl+"/insurancePolicies")}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(N.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();const B=[{path:"",component:L,canActivate:[m.r],resolve:{upcominginsurancesList:(()=>{class r{constructor(t){this.insurancePolicyHttpService=t}resolve(){return this.insurancePolicyHttpService.getAll().pipe((0,w.T)(t=>new u.X(t)),(0,U.W)(t=>(0,X.of)(new u.X(null,t))))}static{this.\u0275fac=function(i){return new(i||r)(e.KVO(G))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})()}}];let D=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(B),c.iI]})}}return r})();var H=n(8330);let O=(()=>{class r{static{this.\u0275fac=function(i){return new(i||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[H.G,D]})}}return r})()}}]);