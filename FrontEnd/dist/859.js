"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[859],{3859:(He,j,s)=>{s.r(j),s.d(j,{InvoiceModule:()=>Pe});var d=s(33),_=s(2676),p=s(9417),V=s(9172),b=s(6354),f=s(8477),T=s(5312),e=s(4438),S=s(2079),k=s(6600),E=s(3979),J=s(369),D=s(5018),$=s(1572),w=s(9790),H=s(1649),M=s(7028),x=s(3874),A=s(8934),z=s(97),W=s(1626);let F=(()=>{class i extends z.s{constructor(t){super(t,T.c.apiUrl+"/invoices")}saveInvoice(t){return null==t.id?this.http.post(this.url,t):this.http.put(this.url,t)}static{this.\u0275fac=function(n){return new(n||i)(e.KVO(W.Qq))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var N=s(2182),u=s(177),G=s(4433),K=s(285),Q=s(1168),L=s(850),y=s(8834),R=s(5084),v=s(882),O=s(9213),Z=s(9631),q=s(2135),ee=s(2418);function te(i,a){if(1&i){const t=e.RV6();e.j41(0,"div",37)(1,"span"),e.EFF(2),e.k0s(),e.j41(3,"img",38),e.bIt("load",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.loadImage())}),e.k0s()()}if(2&i){const t=e.XpG();e.R7$(2),e.JRh(t.form.value.boatName),e.R7$(),e.Y8G("ngClass",t.imageIsLoading())("src",t.getIcon("invoices"),e.B4B)}}function oe(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function ie(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalid"))}}function ne(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function re(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function se(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalid"))}}function ae(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function le(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalid"))}}function ce(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function pe(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function me(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalid"))}}function de(i,a){if(1&i&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&i){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function ue(i,a){if(1&i){const t=e.RV6();e.j41(0,"button",39),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.onDelete())}),e.j41(1,"span"),e.EFF(2),e.nI1(3,"uppercase"),e.k0s()()}if(2&i){const t=e.XpG();e.Y8G("disabled",!t.isAdmin()),e.R7$(2),e.JRh(e.bMT(3,2,t.getLabel("deleteButton")))}}function he(i,a){1&i&&(e.j41(0,"mat-icon",40),e.EFF(1,"lock"),e.k0s())}function ge(i,a){if(1&i&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.description," ")}}function fe(i,a){if(1&i&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.description," ")}}function ve(i,a){if(1&i&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.description," ")}}function _e(i,a){if(1&i&&(e.j41(0,"mat-option",41),e.EFF(1),e.k0s()),2&i){const t=a.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.description," ")}}let P=(()=>{class i{constructor(t,n,o,r,c,l,m,g,C,I,Ue,Be,Xe,Ye,Ve,Je){this.activatedRoute=t,this.cryptoService=n,this.dateAdapter=o,this.dateHelperService=r,this.dexieService=c,this.dialogService=l,this.emojiService=m,this.formBuilder=g,this.helperService=C,this.localStorageService=I,this.messageDialogService=Ue,this.messageHintService=Be,this.messageLabelService=Xe,this.invoiceHttpService=Ye,this.router=Ve,this.sessionStorageService=Je,this.feature="invoiceForm",this.featureIcon="invoices",this.icon="arrow_back",this.parentUrl="/invoices",this.imgIsLoaded=!1,this.isAutoCompleteDisabled=!0}ngOnInit(){this.initForm(),this.setRecordId(),this.getRecord(),this.populateFields(),this.populateDropdowns(),this.setLocale()}ngAfterViewInit(){this.focusOnField()}autocompleteFields(t,n){return n?n[t]:void 0}checkForEmptyAutoComplete(t){""==t.target.value&&(this.isAutoCompleteDisabled=!0)}enableOrDisableAutoComplete(t){this.isAutoCompleteDisabled=this.helperService.enableOrDisableAutoComplete(t)}getHint(t,n=0){return this.messageHintService.getDescription(t,n)}getIcon(t){return T.c.featuresIconDirectory+t+".svg"}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}getNewOrEditHeader(){return""==this.form.value.invoiceId?"headerNew":"headerEdit"}imageIsLoading(){return this.imgIsLoaded?"":"skeleton"}isAdmin(){return"true"==this.cryptoService.decrypt(this.sessionStorageService.getItem("isAdmin"))}isNotNewRecord(){return this.form.value.invoiceId}loadImage(){this.imgIsLoaded=!0}onDelete(){this.dialogService.open(this.messageDialogService.confirmDelete(),"question",["abort","ok"]).subscribe(t=>{t&&this.invoiceHttpService.delete(this.form.value.invoiceId).subscribe({complete:()=>{this.helperService.doPostSaveFormTasks(this.messageDialogService.success(),"ok",this.parentUrl,!0)},error:n=>{this.dialogService.open(this.messageDialogService.filterResponse(n),"error",["ok"])}})})}onSave(){this.saveRecord(this.flattenForm())}openOrCloseAutoComplete(t,n){this.helperService.openOrCloseAutocomplete(this.form,n,t)}filterAutocomplete(t,n,o){if("object"!=typeof o){const r=o.toLowerCase();return this[t].filter(c=>c[n].toLowerCase().startsWith(r))}}flattenForm(){return{id:""!=this.form.value.id?this.form.value.id:null,companyId:this.form.value.company.id,supplierId:this.form.value.supplier.id,documentTypeId:this.form.value.documentType.id,paymentMethodId:this.form.value.paymentMethod.id,date:this.dateHelperService.formatDateToIso(new Date(this.form.value.date)),documentNo:this.form.value.documentNo,amount:this.form.value.amount,putAt:this.form.value.putAt}}focusOnField(){this.helperService.focusOnField()}getRecord(){if(null!=this.invoiceId)return new Promise(t=>{const n=this.activatedRoute.snapshot.data.invoiceForm;null==n.error?(this.invoice=n.record.body,t(this.invoice)):this.dialogService.open(this.messageDialogService.filterResponse(n.error),"error",["ok"]).subscribe(()=>{this.resetForm(),this.goBack()})})}goBack(){this.router.navigate([this.parentUrl])}initForm(){this.form=this.formBuilder.group({id:"",date:["",[p.k0.required]],company:["",[p.k0.required,f.B.RequireAutocomplete]],supplier:["",[p.k0.required,f.B.RequireAutocomplete]],documentType:["",[p.k0.required,f.B.RequireAutocomplete]],paymentMethod:["",[p.k0.required,f.B.RequireAutocomplete]],documentNo:["",[p.k0.required]],amount:["",[p.k0.required,p.k0.min(0),p.k0.max(99999)]],postAt:[""],postUser:[""],putAt:[""],putUser:[""]})}populateDropdownFromDexieDB(t,n,o,r,c){this.dexieService.table(t).orderBy(c).toArray().then(l=>{this[t]=null==this.invoiceId?l.filter(m=>m.isActive):l,this[n]=this.form.get(o).valueChanges.pipe((0,V.Z)(""),(0,b.T)(m=>this.filterAutocomplete(t,r,m)))})}populateDropdowns(){this.populateDropdownFromDexieDB("companies","dropdownCompanies","company","description","description"),this.populateDropdownFromDexieDB("documentTypes","dropdownDocumentTypes","documentType","description","description"),this.populateDropdownFromDexieDB("paymentMethods","dropdownPaymentMethods","paymentMethod","description","description"),this.populateDropdownFromDexieDB("suppliers","dropdownSuppliers","supplier","description","description")}populateFields(){null!=this.invoice&&this.form.setValue({id:this.invoice.id,date:this.invoice.date,company:{id:this.invoice.company.id,description:this.invoice.company.description},supplier:{id:this.invoice.supplier.id,description:this.invoice.supplier.description},documentType:{id:this.invoice.documentType.id,description:this.invoice.documentType.description},paymentMethod:{id:this.invoice.paymentMethod.id,description:this.invoice.paymentMethod.description},documentNo:this.invoice.documentNo,amount:this.invoice.amount,postAt:this.invoice.postAt,postUser:this.invoice.postUser,putAt:this.invoice.putAt,putUser:this.invoice.putUser})}resetForm(){this.form.reset()}saveRecord(t){this.invoiceHttpService.saveInvoice(t).subscribe({next:n=>{this.helperService.doPostSaveFormTasks(200==n.code?this.messageDialogService.success():"","ok",this.parentUrl,!0)},error:n=>{this.dialogService.open(this.messageDialogService.filterResponse(n),"error",["ok"])}})}setLocale(){this.dateAdapter.setLocale(this.localStorageService.getLanguage())}setRecordId(){this.activatedRoute.params.subscribe(t=>{this.invoiceId=t.id})}get date(){return this.form.get("date")}get documentType(){return this.form.get("documentType")}get documentNo(){return this.form.get("documentNo")}get paymentMethod(){return this.form.get("paymentMethod")}get company(){return this.form.get("company")}get supplier(){return this.form.get("supplier")}get amount(){return this.form.get("amount")}get postAt(){return this.form.get("postAt")}get postUser(){return this.form.get("postUser")}get putAt(){return this.form.get("putAt")}get putUser(){return this.form.get("putUser")}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(d.nX),e.rXU(S.j),e.rXU(k.MJ),e.rXU(E.c),e.rXU(J.T),e.rXU(D.o),e.rXU($.E),e.rXU(p.ok),e.rXU(w.wT),e.rXU(H.s),e.rXU(M.$),e.rXU(x.S),e.rXU(A.F),e.rXU(F),e.rXU(d.Ix),e.rXU(N.R))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["invoice-form"]],decls:100,vars:69,consts:[["inputAutoComplete","","triggerCompany","matAutocompleteTrigger"],["datePicker",""],["inputAutoComplete","","triggerSupplier","matAutocompleteTrigger"],["inputAutoComplete","","triggerDocumentType","matAutocompleteTrigger"],["inputAutoComplete","","triggerPaymentMethod","matAutocompleteTrigger"],["companies","matAutocomplete"],["documentTypes","matAutocomplete"],["paymentMethods","matAutocomplete"],["suppliers","matAutocomplete"],["id","form-wrapper"],["id","content"],["id","header"],[3,"feature","featureIcon","header","icon","parentUrl"],["id","boat-name",4,"ngIf"],["id","form",3,"formGroup"],[1,"group-input-field"],["dataTabIndex","1","formControlName","company","matInput","",3,"keydown","keyup","inputTabStop","matAutocompleteDisabled","matAutocomplete"],["matSuffix","",2,"display","flex"],["mat-icon-button","","type","button",3,"click"],[1,"input-suffix","material-icons-outlined"],[4,"ngIf"],["dataTabIndex","2","formControlName","date","matInput","",3,"inputTabStop","matDatepicker"],["matIconSuffix","",3,"for"],["dataTabIndex","3","formControlName","supplier","matInput","",3,"keydown","keyup","inputTabStop","matAutocompleteDisabled","matAutocomplete"],["dataTabIndex","4","formControlName","documentType","matInput","",3,"keydown","keyup","inputTabStop","matAutocompleteDisabled","matAutocomplete"],["dataTabIndex","5","formControlName","documentNo","matInput","",3,"inputTabStop"],["dataTabIndex","6","formControlName","paymentMethod","matInput","",3,"keydown","keyup","inputTabStop","matAutocompleteDisabled","matAutocomplete"],["currencyMask","","dataTabIndex","7","formControlName","amount","matInput","",3,"inputTabStop"],[1,"align-bottom"],[3,"feature","postAt","postUser","putAt","putUser"],["id","footer"],["id","align-right"],["class","delete","mat-flat-button","",3,"disabled","click",4,"ngIf"],["mat-flat-button","",1,"primary",3,"click","disabled"],["class","material-icons-outlined",4,"ngIf"],["autoActiveFirstOption","",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],["id","boat-name"],[2,"height","32px","margin-left","1rem","width","32px",3,"load","ngClass","src"],["mat-flat-button","",1,"delete",3,"click","disabled"],[1,"material-icons-outlined"],[3,"value"]],template:function(n,o){if(1&n){const r=e.RV6();e.j41(0,"div",9)(1,"div",10)(2,"div",11),e.nrm(3,"home-button-and-title",12),e.DNE(4,te,4,3,"div",13),e.k0s(),e.j41(5,"form",14)(6,"div",15)(7,"mat-form-field")(8,"mat-label"),e.EFF(9),e.k0s(),e.j41(10,"input",16,0),e.bIt("keydown",function(l){return e.eBV(r),e.Njj(o.enableOrDisableAutoComplete(l))})("keyup",function(l){return e.eBV(r),e.Njj(o.checkForEmptyAutoComplete(l))}),e.k0s(),e.j41(13,"div",17)(14,"button",18),e.bIt("click",function(){e.eBV(r);const l=e.sdS(12);return e.Njj(o.openOrCloseAutoComplete(l,"company"))}),e.j41(15,"mat-icon",19),e.EFF(16,"expand_more"),e.k0s()()(),e.DNE(17,oe,2,1,"mat-error",20)(18,ie,2,1,"mat-error",20),e.k0s(),e.j41(19,"mat-form-field")(20,"mat-label"),e.EFF(21),e.k0s(),e.nrm(22,"input",21)(23,"mat-datepicker-toggle",22)(24,"mat-datepicker",null,1),e.DNE(26,ne,2,1,"mat-error",20),e.k0s()(),e.j41(27,"mat-form-field")(28,"mat-label"),e.EFF(29),e.k0s(),e.j41(30,"input",23,2),e.bIt("keydown",function(l){return e.eBV(r),e.Njj(o.enableOrDisableAutoComplete(l))})("keyup",function(l){return e.eBV(r),e.Njj(o.checkForEmptyAutoComplete(l))}),e.k0s(),e.j41(33,"div",17)(34,"button",18),e.bIt("click",function(){e.eBV(r);const l=e.sdS(32);return e.Njj(o.openOrCloseAutoComplete(l,"supplier"))}),e.j41(35,"mat-icon",19),e.EFF(36,"expand_more"),e.k0s()()(),e.DNE(37,re,2,1,"mat-error",20)(38,se,2,1,"mat-error",20),e.k0s(),e.j41(39,"div",15)(40,"mat-form-field")(41,"mat-label"),e.EFF(42),e.k0s(),e.j41(43,"input",24,3),e.bIt("keydown",function(l){return e.eBV(r),e.Njj(o.enableOrDisableAutoComplete(l))})("keyup",function(l){return e.eBV(r),e.Njj(o.checkForEmptyAutoComplete(l))}),e.k0s(),e.j41(46,"div",17)(47,"button",18),e.bIt("click",function(){e.eBV(r);const l=e.sdS(45);return e.Njj(o.openOrCloseAutoComplete(l,"documentType"))}),e.j41(48,"mat-icon",19),e.EFF(49,"expand_more"),e.k0s()()(),e.DNE(50,ae,2,1,"mat-error",20)(51,le,2,1,"mat-error",20),e.k0s(),e.j41(52,"mat-form-field")(53,"mat-label"),e.EFF(54),e.k0s(),e.nrm(55,"input",25),e.DNE(56,ce,2,1,"mat-error",20),e.k0s()(),e.j41(57,"mat-form-field")(58,"mat-label"),e.EFF(59),e.k0s(),e.j41(60,"input",26,4),e.bIt("keydown",function(l){return e.eBV(r),e.Njj(o.enableOrDisableAutoComplete(l))})("keyup",function(l){return e.eBV(r),e.Njj(o.checkForEmptyAutoComplete(l))}),e.k0s(),e.j41(63,"div",17)(64,"button",18),e.bIt("click",function(){e.eBV(r);const l=e.sdS(62);return e.Njj(o.openOrCloseAutoComplete(l,"paymentMethod"))}),e.j41(65,"mat-icon",19),e.EFF(66,"expand_more"),e.k0s()()(),e.DNE(67,pe,2,1,"mat-error",20)(68,me,2,1,"mat-error",20),e.k0s(),e.j41(69,"mat-form-field")(70,"mat-label"),e.EFF(71),e.k0s(),e.nrm(72,"input",27),e.DNE(73,de,2,1,"mat-error",20),e.k0s(),e.j41(74,"div",28),e.nrm(75,"metadata-panel",29),e.k0s()()(),e.j41(76,"div",30)(77,"div",31),e.DNE(78,ue,4,4,"button",32),e.j41(79,"button",33),e.bIt("click",function(){return e.eBV(r),e.Njj(o.onSave())}),e.DNE(80,he,2,0,"mat-icon",34),e.j41(81,"span"),e.EFF(82),e.nI1(83,"uppercase"),e.k0s()()()()(),e.j41(84,"mat-autocomplete",35,5),e.DNE(86,ge,2,2,"mat-option",36),e.nI1(87,"async"),e.k0s(),e.j41(88,"mat-autocomplete",35,6),e.DNE(90,fe,2,2,"mat-option",36),e.nI1(91,"async"),e.k0s(),e.j41(92,"mat-autocomplete",35,7),e.DNE(94,ve,2,2,"mat-option",36),e.nI1(95,"async"),e.k0s(),e.j41(96,"mat-autocomplete",35,8),e.DNE(98,_e,2,2,"mat-option",36),e.nI1(99,"async"),e.k0s()}if(2&n){const r=e.sdS(25),c=e.sdS(85),l=e.sdS(89),m=e.sdS(93),g=e.sdS(97);e.R7$(3),e.Y8G("feature",o.feature)("featureIcon",o.featureIcon)("header",o.getNewOrEditHeader())("icon",o.icon)("parentUrl",o.parentUrl),e.R7$(),e.Y8G("ngIf",o.isNotNewRecord()),e.R7$(),e.Y8G("formGroup",o.form),e.R7$(4),e.JRh(o.getLabel("company")),e.R7$(),e.Y8G("inputTabStop",o.input)("matAutocompleteDisabled",o.isAutoCompleteDisabled)("matAutocomplete",c),e.R7$(7),e.Y8G("ngIf",o.company.hasError("required")),e.R7$(),e.Y8G("ngIf",!o.company.hasError("required")&&o.company.hasError("incorrect")),e.R7$(3),e.JRh(o.getLabel("date")),e.R7$(),e.Y8G("inputTabStop",o.input)("matDatepicker",r),e.R7$(),e.Y8G("for",r),e.R7$(3),e.Y8G("ngIf",o.date.hasError("required")),e.R7$(3),e.JRh(o.getLabel("supplier")),e.R7$(),e.Y8G("inputTabStop",o.input)("matAutocompleteDisabled",o.isAutoCompleteDisabled)("matAutocomplete",g),e.R7$(7),e.Y8G("ngIf",o.supplier.hasError("required")),e.R7$(),e.Y8G("ngIf",!o.supplier.hasError("required")&&o.supplier.hasError("incorrect")),e.R7$(4),e.JRh(o.getLabel("documentType")),e.R7$(),e.Y8G("inputTabStop",o.input)("matAutocompleteDisabled",o.isAutoCompleteDisabled)("matAutocomplete",l),e.R7$(7),e.Y8G("ngIf",o.documentType.hasError("required")),e.R7$(),e.Y8G("ngIf",!o.documentType.hasError("required")&&o.documentType.hasError("incorrect")),e.R7$(3),e.JRh(o.getLabel("documentNo")),e.R7$(),e.Y8G("inputTabStop",o.input),e.R7$(),e.Y8G("ngIf",o.documentNo.hasError("required")),e.R7$(3),e.JRh(o.getLabel("paymentMethod")),e.R7$(),e.Y8G("inputTabStop",o.input)("matAutocompleteDisabled",o.isAutoCompleteDisabled)("matAutocomplete",m),e.R7$(7),e.Y8G("ngIf",o.paymentMethod.hasError("required")),e.R7$(),e.Y8G("ngIf",!o.paymentMethod.hasError("required")&&o.paymentMethod.hasError("incorrect")),e.R7$(3),e.JRh(o.getLabel("amount")),e.R7$(),e.Y8G("inputTabStop",o.input),e.R7$(),e.Y8G("ngIf",o.amount.hasError("required")),e.R7$(2),e.Y8G("feature",o.feature)("postAt",o.form.value.postAt)("postUser",o.form.value.postUser)("putAt",o.form.value.putAt)("putUser",o.form.value.putUser),e.R7$(3),e.Y8G("ngIf",""!=o.form.value.reservationId),e.R7$(),e.Y8G("disabled",!o.form.valid||!o.isAdmin()),e.R7$(),e.Y8G("ngIf",!o.form.valid),e.R7$(2),e.JRh(e.bMT(83,59,o.getLabel("saveButton"))),e.R7$(2),e.Y8G("displayWith",o.autocompleteFields.bind(o,"description")),e.R7$(2),e.Y8G("ngForOf",e.bMT(87,61,o.dropdownCompanies)),e.R7$(2),e.Y8G("displayWith",o.autocompleteFields.bind(o,"description")),e.R7$(2),e.Y8G("ngForOf",e.bMT(91,63,o.dropdownDocumentTypes)),e.R7$(2),e.Y8G("displayWith",o.autocompleteFields.bind(o,"description")),e.R7$(2),e.Y8G("ngForOf",e.bMT(95,65,o.dropdownPaymentMethods)),e.R7$(2),e.Y8G("displayWith",o.autocompleteFields.bind(o,"description")),e.R7$(2),e.Y8G("ngForOf",e.bMT(99,67,o.dropdownSuppliers))}},dependencies:[u.YU,u.Sq,u.bT,p.qT,p.me,p.BC,p.cb,G.K,K.i,Q.B,L.$3,k.wT,L.pN,y.$z,y.iY,R.Vh,R.bZ,R.bU,v.rl,v.nJ,v.TL,v.yw,O.An,Z.fg,q.j,ee.kU,p.j4,p.JD,u.Jj,u.Pc],styles:["[_nghost-%COMP%]{width:100%}#form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#content[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6.5px);backdrop-filter:blur(6.5px);background-color:var(--color-background);border-radius:1rem;border:.0625rem solid color-mix(in srgb,var(--color-border) 50%,transparent);display:flex;flex-direction:column;gap:.9375rem;height:100%;overflow-y:hidden;padding:1rem 1.6rem 1rem 2rem;transition:background-color var(--theme-delay)}#form[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;margin:0 auto;overflow-y:hidden;width:80%}#header[_ngcontent-%COMP%]{align-items:center;display:flex;margin:0 auto;width:80%}#footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:right;padding:.875rem 2rem}#align-right[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin:0 0 0 auto}.group-input-field[_ngcontent-%COMP%]{display:flex;gap:.5rem}.checkboxes[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;margin:0 0 0 1rem}.align-bottom[_ngcontent-%COMP%]{margin-top:auto!important}","[_nghost-%COMP%]{height:100%}.group-input-field[_ngcontent-%COMP%]:last-child{margin-top:auto}#add-berth-button[_ngcontent-%COMP%]{background-color:var(--color-button-secondary);border-radius:1rem;color:var(--color-button-text);height:1.5625rem;margin:.9375rem 0 0;width:1.5625rem}#textarea[_ngcontent-%COMP%]{height:10rem;margin-top:.5rem;margin-bottom:1rem;resize:none}#tab-content[_ngcontent-%COMP%]{column-gap:1rem;display:flex}#ownwer-tab[_ngcontent-%COMP%], #billing-tab[_ngcontent-%COMP%]{width:100%}#tab-content[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--color-button-primary);display:flex;font-family:var(--font-family-fahkwang);font-size:.875rem;font-weight:600;padding:0 0 1rem 1rem}#owner-tab-header[_ngcontent-%COMP%]{padding:0 0 3px}#billing-tab-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between}#copy-owner-to-billing[_ngcontent-%COMP%]{color:var(--color-button-secondary)!important;margin-top:-.6875rem;padding:.5rem 1rem!important}#copy-owner-to-billing[_ngcontent-%COMP%]:hover{cursor:pointer}#boat-name[_ngcontent-%COMP%]{align-items:center;color:#466dab;display:flex;font-family:var(--font-family-fahkwang);font-size:1rem;font-weight:600;margin-left:auto;margin-right:1rem;margin-top:.25rem;transform:scaleY(1.4)}"]})}}return i})();var U=s(9437),B=s(7673),X=s(668);let be=(()=>{class i{constructor(t){this.invoiceHttpService=t}resolve(t){return this.invoiceHttpService.getSingle(t.params.id).pipe((0,b.T)(n=>new X.T(n)),(0,U.W)(n=>(0,B.of)(new X.T(null,n))))}static{this.\u0275fac=function(n){return new(n||i)(e.KVO(F))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fe=s(5779),ye=s(8676),h=s(8520),Re=s(4435);const Ce=["table"];function Ie(i,a){if(1&i&&(e.j41(0,"div",37)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.description)}}function je(i,a){if(1&i){const t=e.RV6();e.j41(0,"p-multiSelect",35),e.bIt("onChange",function(o){const r=e.eBV(t).filterCallback;return e.Njj(r(o.value))}),e.DNE(1,Ie,3,1,"ng-template",36),e.k0s()}if(2&i){const t=a.$implicit,n=e.XpG(2);e.Y8G("ngModel",t)("options",n.distinctCompanies)("placeholder",n.getEmoji("wildcard"))}}function Te(i,a){if(1&i&&(e.j41(0,"div",37)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.description)}}function Se(i,a){if(1&i){const t=e.RV6();e.j41(0,"p-multiSelect",35),e.bIt("onChange",function(o){const r=e.eBV(t).filterCallback;return e.Njj(r(o.value))}),e.DNE(1,Te,3,1,"ng-template",36),e.k0s()}if(2&i){const t=a.$implicit,n=e.XpG(2);e.Y8G("ngModel",t)("options",n.distinctSuppliers)("placeholder",n.getEmoji("wildcard"))}}function ke(i,a){if(1&i&&(e.j41(0,"div",37)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.description)}}function Ee(i,a){if(1&i){const t=e.RV6();e.j41(0,"p-multiSelect",35),e.bIt("onChange",function(o){const r=e.eBV(t).filterCallback;return e.Njj(r(o.value))}),e.DNE(1,ke,3,1,"ng-template",36),e.k0s()}if(2&i){const t=a.$implicit,n=e.XpG(2);e.Y8G("ngModel",t)("options",n.distinctDocumentTypes)("placeholder",n.getEmoji("wildcard"))}}function De(i,a){if(1&i&&(e.j41(0,"div",37)(1,"span"),e.EFF(2),e.k0s()()),2&i){const t=a.$implicit;e.R7$(2),e.JRh(t.description)}}function $e(i,a){if(1&i){const t=e.RV6();e.j41(0,"p-multiSelect",35),e.bIt("onChange",function(o){const r=e.eBV(t).filterCallback;return e.Njj(r(o.value))}),e.DNE(1,De,3,1,"ng-template",36),e.k0s()}if(2&i){const t=a.$implicit,n=e.XpG(2);e.Y8G("ngModel",t)("options",n.distinctPaymentMethods)("placeholder",n.getEmoji("wildcard"))}}function we(i,a){if(1&i){const t=e.RV6();e.j41(0,"tr"),e.nrm(1,"th",13),e.j41(2,"th",14),e.EFF(3),e.k0s(),e.j41(4,"th",15),e.EFF(5),e.k0s(),e.j41(6,"th",16),e.EFF(7),e.k0s(),e.j41(8,"th",17),e.EFF(9),e.k0s(),e.j41(10,"th",18),e.EFF(11),e.k0s(),e.j41(12,"th",19),e.EFF(13),e.k0s(),e.j41(14,"th",20),e.EFF(15),e.k0s(),e.nrm(16,"th",21),e.k0s(),e.j41(17,"tr")(18,"th",22),e.nrm(19,"p-tableHeaderCheckbox"),e.k0s(),e.j41(20,"th",23)(21,"p-columnFilter",24),e.bIt("input",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.onFilter(o.target.value,"date","contains"))}),e.k0s()(),e.j41(22,"th",25)(23,"p-columnFilter",26),e.DNE(24,je,2,3,"ng-template",27),e.k0s()(),e.j41(25,"th",25)(26,"p-columnFilter",28),e.DNE(27,Se,2,3,"ng-template",27),e.k0s()(),e.j41(28,"th",25)(29,"p-columnFilter",29),e.DNE(30,Ee,2,3,"ng-template",27),e.k0s()(),e.j41(31,"th",25)(32,"p-columnFilter",30),e.DNE(33,$e,2,3,"ng-template",27),e.k0s()(),e.j41(34,"th",23)(35,"p-columnFilter",31),e.bIt("input",function(o){e.eBV(t);const r=e.XpG();return e.Njj(r.onFilter(o.target.value,"documentNo","contains"))}),e.k0s()(),e.j41(36,"th",32),e.nrm(37,"p-columnFilter",33),e.k0s(),e.nrm(38,"th",34),e.k0s()}if(2&i){const t=e.XpG();e.R7$(3),e.JRh(t.getLabel("headerDate")),e.R7$(2),e.JRh(t.getLabel("headerCompany")),e.R7$(2),e.JRh(t.getLabel("headerSupplier")),e.R7$(2),e.JRh(t.getLabel("headerDocumentType")),e.R7$(2),e.JRh(t.getLabel("headerPaymentMethod")),e.R7$(2),e.JRh(t.getLabel("headerDocumentNo")),e.R7$(2),e.JRh(t.getLabel("headerAmount")),e.R7$(8),e.Y8G("showMenu",!1),e.R7$(3),e.Y8G("showMenu",!1),e.R7$(3),e.Y8G("showMenu",!1),e.R7$(3),e.Y8G("showMenu",!1)}}function Me(i,a){if(1&i){const t=e.RV6();e.j41(0,"tr",38),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onHighlightRow(o.id))})("dblclick",function(){const o=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onEditRecord(o.id))}),e.j41(1,"td",39)(2,"span",40),e.nrm(3,"p-tableCheckbox",41),e.k0s()(),e.j41(4,"td",42)(5,"span",43),e.EFF(6),e.k0s()(),e.j41(7,"td",44)(8,"span"),e.EFF(9),e.k0s()(),e.j41(10,"td",44)(11,"span"),e.EFF(12),e.k0s()(),e.j41(13,"td",44)(14,"span"),e.EFF(15),e.k0s()(),e.j41(16,"td",44)(17,"span"),e.EFF(18),e.k0s()(),e.j41(19,"td",44)(20,"span",45),e.EFF(21),e.k0s()(),e.j41(22,"td",46)(23,"span",47),e.EFF(24),e.k0s()(),e.j41(25,"td",48)(26,"span",49),e.bIt("click",function(){const o=e.eBV(t).$implicit,r=e.XpG();return e.Njj(r.onEditRecord(o.id))}),e.j41(27,"mat-icon",50),e.EFF(28,"more_horiz"),e.k0s()()()()}if(2&i){const t=a.$implicit,n=e.XpG();e.BMQ("id",t.id),e.R7$(3),e.Y8G("value",t),e.R7$(3),e.JRh(n.formatDateToLocale(t.date,!1,!0)),e.R7$(3),e.JRh(t.company.description),e.R7$(3),e.JRh(t.supplier.description),e.R7$(3),e.JRh(t.documentType.description),e.R7$(3),e.JRh(t.paymentMethod.description),e.R7$(3),e.JRh(t.documentNo),e.R7$(3),e.JRh(t.amount)}}let Ae=(()=>{class i{constructor(t,n,o,r,c,l,m,g,C,I){this.activatedRoute=t,this.cryptoService=n,this.dateHelperService=o,this.dialogService=r,this.emojiService=c,this.helperService=l,this.messageDialogService=m,this.messageLabelService=g,this.router=C,this.sessionStorageService=I,this.url="invoices",this.feature="invoiceList",this.featureIcon="invoices",this.icon="home",this.parentUrl="/home",this.records=[],this.recordsFilteredCount=0,this.filterDate="",this.selectedRecords=[],this.distinctCompanies=[],this.distinctDocumentTypes=[],this.distinctPaymentMethods=[],this.distinctSuppliers=[],this.occupied=0,this.dryDock=0,this.fishingBoats=0,this.athenian=0}ngOnInit(){this.loadRecords(),this.populateDropdownFilters(),this.filterTableFromStoredFilters(),this.setTabTitle(),this.doVirtualTableTasks(),this.setSidebarsHeight()}ngAfterViewInit(){setTimeout(()=>{this.getVirtualElement(),this.scrollToSavedPosition(),this.hightlightSavedRow(),this.enableDisableFilters()},500)}formatDateToLocale(t,n=!1,o=!1,r=!1){return r&&"2199-12-31"==t?"":this.dateHelperService.formatISODateToLocale(t,n,o)}getEmoji(t){return this.emojiService.getEmoji("string"==typeof t?t:t?"green-box":"red-box")}getWarningEmoji(t){return t?this.emojiService.getEmoji("warning"):""}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}getPaymentDescriptionColor(t){switch(t){case"NONE":return"red";case"PARTIAL":return"yellow";case"FULL":return"green"}}hasDateFilter(){return""==this.filterDate?"hidden":""}isAdmin(){return"true"==this.cryptoService.decrypt(this.sessionStorageService.getItem("isAdmin"))}onEditRecord(t){this.storeScrollTop(),this.storeSelectedId(t),this.navigateToRecord(t)}onFilter(t,n,o){t&&this.table.filter(t,n,o)}onFilterRecords(t){this.sessionStorageService.saveItem(this.feature+"-filters",JSON.stringify(this.table.filters)),this.recordsFilteredCount=t.filteredValue.length}onHighlightRow(t){this.helperService.highlightRow(t)}onNewRecord(){this.router.navigate([this.url+"/new"])}onResetTableFilters(){this.helperService.clearTableTextFilters(this.table,["description","email","phones"])}doVirtualTableTasks(){setTimeout(()=>{this.getVirtualElement(),this.scrollToSavedPosition(),this.hightlightSavedRow()},1e3)}enableDisableFilters(){0==this.records.length?this.helperService.disableTableFilters():this.helperService.enableTableFilters()}filterTableFromStoredFilters(){null!=this.sessionStorageService.getFilters(this.feature+"-filters")&&setTimeout(()=>{},1e3)}getVirtualElement(){this.virtualElement=document.getElementsByClassName("p-scroller-inline")[0]}goBack(){this.router.navigate([this.parentUrl])}hightlightSavedRow(){this.helperService.highlightSavedRow(this.feature)}loadRecords(){return new Promise(t=>{const n=this.activatedRoute.snapshot.data[this.feature];null==n.error?(this.records=n.list,this.recordsFilteredCount=this.records.length,t(this.records)):this.dialogService.open(this.messageDialogService.filterResponse(n.error),"error",["ok"]).subscribe(()=>{this.goBack()})})}navigateToRecord(t){this.router.navigate([this.url,t])}populateDropdownFilters(){this.distinctCompanies=this.helperService.getDistinctRecords(this.records,"company","description"),this.distinctDocumentTypes=this.helperService.getDistinctRecords(this.records,"documentType","description"),this.distinctPaymentMethods=this.helperService.getDistinctRecords(this.records,"paymentMethod","description"),this.distinctSuppliers=this.helperService.getDistinctRecords(this.records,"supplier","description")}scrollToSavedPosition(){this.helperService.scrollToSavedPosition(this.virtualElement,this.feature)}setSidebarsHeight(){this.helperService.setSidebarsTopMargin("0")}setTabTitle(){this.helperService.setTabTitle(this.feature)}storeSelectedId(t){this.sessionStorageService.saveItem(this.feature+"-id",t)}storeScrollTop(){this.sessionStorageService.saveItem(this.feature+"-scrollTop",this.virtualElement.scrollTop)}static{this.\u0275fac=function(n){return new(n||i)(e.rXU(d.nX),e.rXU(S.j),e.rXU(E.c),e.rXU(D.o),e.rXU($.E),e.rXU(w.wT),e.rXU(M.$),e.rXU(A.F),e.rXU(d.Ix),e.rXU(N.R))}}static{this.\u0275cmp=e.VBU({type:i,selectors:[["invoice-list"]],viewQuery:function(n,o){if(1&n&&e.GBs(Ce,5),2&n){let r;e.mGM(r=e.lsd())&&(o.table=r.first)}},decls:15,vars:17,consts:[["table",""],["id","list-wrapper"],["id","content"],["id","header"],[3,"featureIcon","feature","icon","parentUrl"],["id","table-wrapper"],["dataKey","id","scrollHeight","flex","selectionMode","multiple","sortMode","multiple",3,"onFilter","selectionChange","selection","scrollable","value","virtualScrollItemSize","virtualScroll"],["pTemplate","header"],["pTemplate","body"],["id","footer"],[3,"resetTableFilters","filteredRecordCount","mustShowSelectedFilteredCount","recordCount","selectedRecordCount"],["id","align-right"],["mat-flat-button","",1,"primary",3,"click","disabled"],[1,"no-border-bottom","width-3"],["pSortableColumn","date",1,"no-border-bottom","width-7"],["pSortableColumn","company.description",1,"no-border-bottom","width-10"],["pSortableColumn","supplier.description",1,"no-border-bottom","width-10"],["pSortableColumn","documentType.description",1,"no-border-bottom","width-10"],["pSortableColumn","paymentMethod.description",1,"no-border-bottom","width-10"],["pSortableColumn","documentNo",1,"no-border-bottom","width-6"],["pSortableColumn","amount",1,"no-border-bottom","width-6"],[1,"no-border-bottom","width-4"],[1,"no-border-top","width-3"],[1,"no-border-top","width-7"],["field","date",3,"input"],[1,"no-border-top","width-10"],["field","company","matchMode","in",3,"showMenu"],["pTemplate","filter"],["field","supplier","matchMode","in",3,"showMenu"],["field","documentType","matchMode","in",3,"showMenu"],["field","paymentMethod","matchMode","in",3,"showMenu"],["field","documentNo",3,"input"],[1,"no-border-top","width-6"],["field","amount","type","number"],[1,"no-border-top","width-4"],["optionLabel","description",3,"onChange","ngModel","options","placeholder"],["pTemplate","item"],[1,"p-multiselect-option"],[2,"height","32px",3,"click","dblclick"],[1,"width-3"],[1,"center","no-overflow",2,"padding-right","0 !important","padding-top","0.25rem !important"],[3,"value"],[1,"width-7"],[1,"center","no-overflow"],[1,"width-10"],[1,"center"],[1,"width-5"],[1,"right"],[1,"width-4"],[1,"center",3,"click"],[1,"material-icons-outlined","small-icon"]],template:function(n,o){if(1&n){const r=e.RV6();e.j41(0,"div",1)(1,"div",2)(2,"div",3),e.nrm(3,"home-button-and-title",4),e.k0s(),e.j41(4,"div",5)(5,"p-table",6,0),e.bIt("onFilter",function(l){return e.eBV(r),e.Njj(o.onFilterRecords(l))}),e.mxI("selectionChange",function(l){return e.eBV(r),e.DH7(o.selectedRecords,l)||(o.selectedRecords=l),e.Njj(l)}),e.DNE(7,we,39,11,"ng-template",7)(8,Me,29,9,"ng-template",8),e.k0s()()(),e.j41(9,"div",9)(10,"table-total-filtered-records",10),e.bIt("resetTableFilters",function(){return e.eBV(r),e.Njj(o.onResetTableFilters())}),e.k0s(),e.j41(11,"div",11)(12,"button",12),e.bIt("click",function(){return e.eBV(r),e.Njj(o.onNewRecord())}),e.EFF(13),e.nI1(14,"uppercase"),e.k0s()()()()}2&n&&(e.R7$(3),e.Y8G("featureIcon",o.featureIcon)("feature",o.feature)("icon",o.icon)("parentUrl",o.parentUrl),e.R7$(2),e.R50("selection",o.selectedRecords),e.Y8G("scrollable",!0)("value",o.records)("virtualScrollItemSize",32)("virtualScroll",!0),e.R7$(5),e.Y8G("filteredRecordCount",o.recordsFilteredCount)("mustShowSelectedFilteredCount",!0)("recordCount",o.records.length)("selectedRecordCount",o.selectedRecords.length),e.R7$(2),e.Y8G("disabled",!o.isAdmin()),e.R7$(),e.JRh(e.bMT(14,15,o.getLabel("newRecord"))))},dependencies:[p.BC,p.vS,G.K,y.$z,O.An,Fe.Ei,ye.KF,h.XI,h.Tg,h.S9,h.nA,h.rl,Re.j,u.Pc],styles:["#list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#content[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6.5px);backdrop-filter:blur(6.5px);background-color:var(--color-background);border-radius:1rem;border:.0625rem solid color-mix(in srgb,var(--color-border) 50%,transparent);display:flex;flex-direction:column;gap:.9375rem;height:100%;margin:0 auto;overflow-y:hidden;padding:1rem 1.6rem 1rem 2rem;transition:background-color var(--theme-delay);width:100%}#header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin:0 2rem 0 0}#table-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}#footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:right;padding:.875rem 2rem}#align-right[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}",".green[_ngcontent-%COMP%]{color:#39a4d9;font-size:.6875rem!important}.yellow[_ngcontent-%COMP%]{color:#afaf02;font-size:.6875rem!important}.red[_ngcontent-%COMP%]{color:#fb5e5e;font-size:.6875rem!important}.small-icon[_ngcontent-%COMP%]{font-size:1rem;padding:.25rem 0 0}#knobs-and-table[_ngcontent-%COMP%]{column-gap:2rem;display:flex;flex-direction:row;height:100%}#knobs[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;row-gap:.5rem}.knob[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:column;justify-content:center}.knob[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:var(--color-text);font-family:var(--font-family-fahkwang);font-size:.75rem;text-align:center;transition:all var(--theme-delay)}"]})}}return i})();var Y=s(1338);const Ge=[{path:"",component:Ae,canActivate:[_.r],resolve:{invoiceList:(()=>{class i{constructor(t){this.invoiceHttpService=t}resolve(){return this.invoiceHttpService.getAll().pipe((0,b.T)(t=>new Y.X(t)),(0,U.W)(t=>(0,B.of)(new Y.X(null,t))))}static{this.\u0275fac=function(n){return new(n||i)(e.KVO(F))}}static{this.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})()}},{path:"new",component:P,canActivate:[_.r]},{path:":id",component:P,canActivate:[_.r],resolve:{invoiceForm:be}}];let Le=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[d.iI.forChild(Ge),d.iI]})}}return i})();var Oe=s(8330);let Pe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=e.$C({type:i})}static{this.\u0275inj=e.G2t({imports:[Oe.G,Le]})}}return i})()}}]);