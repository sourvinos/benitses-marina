"use strict";(self.webpackChunkFrontEnd=self.webpackChunkFrontEnd||[]).push([[129],{3129:(de,S,a)=>{a.r(S),a.d(S,{LedgerModule:()=>se});var y=a(33),E=a(2676),c=a(9417),e=a(4438),f=a(5351),$=a(9172),P=a(6354),v=a(8477),b=a(3979),B=a(369),R=a(9790),D=a(8862),F=a(3874),h=a(8934),T=a(2182),d=a(177),k=a(6600),I=a(1649),g=a(5084),p=a(882),j=a(285),L=a(1168);function G(r,m){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalidDateRange"))}}let A=(()=>{class r{constructor(t,o,i,n,l,s,u){this.dateAdapter=t,this.dateHelperService=o,this.formBuilder=i,this.interactionService=n,this.localStorageService=l,this.messageHintService=s,this.messageLabelService=u,this.outputValues=new e.bkB,this.feature="date-range-picker"}ngOnInit(){this.initForm(),this.setLocale(),this.subscribeToInteractionService()}doTodayTasks(){this.form.patchValue({fromDate:this.dateHelperService.formatDateToIso(new Date),toDate:this.dateHelperService.formatDateToIso(new Date)}),this.outputValues.emit(this.form)}emitFormValues(t){this.form.patchValue({date:new Date(t.value)}),this.parentDateRange[0]=this.form.value.fromDate,this.parentDateRange[1]=this.form.value.toDate,this.outputValues.emit(this.form)}getHint(t,o=0){return this.messageHintService.getDescription(t,o)}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}isInvalidDateRange(){return null==this.form.value.fromDate||null==this.form.value.toDate||this.form.value.fromDate>this.form.value.toDate||void this.dateHelperService.removeInvalidClassFromRangePicker()}initForm(){this.form=this.formBuilder.group({fromDate:[new Date(this.parentDateRange[0]),c.k0.required],toDate:[new Date(this.parentDateRange[1]),c.k0.required]},{validator:v.B.validDatePeriod})}setLocale(){this.dateAdapter.setLocale(this.localStorageService.getLanguage())}subscribeToInteractionService(){this.interactionService.refreshDateAdapter.subscribe(()=>{this.setLocale()})}get fromDate(){return this.form.get("fromDate")}get toDate(){return this.form.get("toDate")}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(k.MJ),e.rXU(b.c),e.rXU(c.ok),e.rXU(D.y),e.rXU(I.s),e.rXU(F.S),e.rXU(h.F))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["date-range-picker"]],inputs:{parentDateRange:"parentDateRange"},outputs:{outputValues:"outputValues"},decls:13,vars:8,consts:[["picker",""],["id","form",3,"formGroup"],[3,"rangePicker"],["dataTabIndex","3","formControlName","fromDate","matStartDate","",3,"dateChange","inputTabStop"],["dataTabIndex","4","formControlName","toDate","matEndDate","",3,"dateChange","inputTabStop"],["matSuffix","",3,"for"],[4,"ngIf"]],template:function(o,i){if(1&o){const n=e.RV6();e.j41(0,"form",1)(1,"mat-form-field")(2,"mat-label"),e.EFF(3),e.k0s(),e.j41(4,"mat-date-range-input",2)(5,"input",3),e.bIt("dateChange",function(s){return e.eBV(n),e.Njj(i.emitFormValues(s))}),e.k0s(),e.j41(6,"input",4),e.bIt("dateChange",function(s){return e.eBV(n),e.Njj(i.emitFormValues(s))}),e.k0s()(),e.nrm(7,"mat-date-range-picker",null,0)(9,"mat-datepicker-toggle",5),e.j41(10,"mat-hint"),e.EFF(11),e.k0s(),e.DNE(12,G,2,1,"mat-error",6),e.k0s()()}if(2&o){const n=e.sdS(8);e.Y8G("formGroup",i.form),e.R7$(3),e.JRh(i.getLabel("date")),e.R7$(),e.Y8G("rangePicker",n),e.R7$(),e.Y8G("inputTabStop",i.input),e.R7$(),e.Y8G("inputTabStop",i.input),e.R7$(3),e.Y8G("for",n),e.R7$(2),e.JRh(i.getLabel("hint")),e.R7$(),e.Y8G("ngIf",i.isInvalidDateRange())}},dependencies:[d.bT,c.qT,c.me,c.BC,c.cb,g.bU,g.el,g.xR,g.IG,g.SG,p.rl,p.nJ,p.MV,p.TL,p.yw,c.j4,c.JD,j.i,L.B],encapsulation:2})}}return r})();var w=a(850),C=a(8834),O=a(9213),M=a(9631);function V(r,m){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function U(r,m){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalid"))}}function J(r,m){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.getHint("required"))}}function X(r,m){if(1&r&&(e.j41(0,"mat-error"),e.EFF(1),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.JRh(t.getHint("invalid"))}}function H(r,m){1&r&&(e.j41(0,"mat-icon",22),e.EFF(1,"lock"),e.k0s())}function N(r,m){if(1&r&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&r){const t=m.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.description," ")}}function x(r,m){if(1&r&&(e.j41(0,"mat-option",23),e.EFF(1),e.k0s()),2&r){const t=m.$implicit;e.Y8G("value",t),e.R7$(),e.SpI(" ",t.description," ")}}let Y=(()=>{class r{constructor(t,o,i,n,l,s,u,le,ce,me,pe){this.data=t,this.dateHelperService=o,this.dexieService=i,this.dialogRef=n,this.formBuilder=l,this.helperService=s,this.interactionService=u,this.messageHintService=le,this.messageLabelService=ce,this.ngZone=me,this.sessionStorageService=pe,this.outputSelected=new e.bkB,this.feature="ledgerCriteria",this.featureIcon="ledgers",this.icon="arrow_back",this.parentUrl="/home",this.isAutoCompleteDisabled=!0}ngOnInit(){this.initForm(),this.populateFormFromStoredFields(this.getCriteriaFromStorage()),this.populateDropdowns()}autocompleteFields(t,o){return o?o[t]:void 0}checkForEmptyAutoComplete(t){""==t.target.value&&(this.isAutoCompleteDisabled=!0)}doDateTasks(t){this.updateFormControls(t)}enableOrDisableAutoComplete(t){this.isAutoCompleteDisabled=this.helperService.enableOrDisableAutoComplete(t)}getDateRange(){const t=[];return t.push(this.form.value.fromDate),t.push(this.form.value.toDate),t}getHint(t,o=0){return this.messageHintService.getDescription(t,o)}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}onClose(){this.dialogRef.close()}onSearch(){this.ngZone.run(()=>{this.interactionService.updateDateRange(this.form.value),this.sessionStorageService.saveItem(this.feature,JSON.stringify(this.form.value)),this.dialogRef.close(this.createCriteriaObject(this.form.value))})}openOrCloseAutoComplete(t,o){this.helperService.openOrCloseAutocomplete(this.form,o,t)}patchFormWithSelectedDateRange(t){this.form.patchValue({fromDate:this.dateHelperService.formatDateToIso(new Date(t.value.fromDate)),toDate:this.dateHelperService.formatDateToIso(new Date(t.value.toDate))})}filterAutocomplete(t,o,i){if("object"!=typeof i){const n=i.toLowerCase();return this[t].filter(l=>l[o].toLowerCase().startsWith(n))}}getCriteriaFromStorage(){return this.sessionStorageService.getItem(this.feature)?JSON.parse(this.sessionStorageService.getItem(this.feature)):""}initForm(){this.form=this.formBuilder.group({company:["",[c.k0.required,v.B.RequireAutocomplete]],supplier:["",[c.k0.required,v.B.RequireAutocomplete]],fromDate:["",[c.k0.required]],toDate:["",[c.k0.required]]})}createCriteriaObject(t){return{companyId:t.company.id,supplierId:t.supplier.id,fromDate:t.fromDate,toDate:t.toDate}}populateDropdowns(){this.populateDropdownFromDexieDB("companiesCriteria","dropdownCompanies","company","description","description"),this.populateDropdownFromDexieDB("suppliersCriteria","dropdownSuppliers","supplier","description","description")}populateDropdownFromDexieDB(t,o,i,n,l){this.dexieService.table(t).orderBy(l).toArray().then(s=>{this[t]=s,this[o]=this.form.get(i).valueChanges.pipe((0,$.Z)(""),(0,P.T)(u=>this.filterAutocomplete(t,n,u)))})}populateFormFromStoredFields(t){this.form.patchValue({company:t.company,supplier:t.supplier,fromDate:t.fromDate,toDate:t.toDate})}updateFormControls(t){this.form.patchValue({fromDate:this.dateHelperService.formatDateToIso(new Date(t.value.fromDate)),toDate:this.dateHelperService.formatDateToIso(new Date(t.value.toDate))})}get company(){return this.form.get("company")}get supplier(){return this.form.get("supplier")}get fromDate(){return this.form.get("fromDate")}get toDate(){return this.form.get("toDate")}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(f.Vh),e.rXU(b.c),e.rXU(B.T),e.rXU(f.CP),e.rXU(c.ok),e.rXU(R.wT),e.rXU(D.y),e.rXU(F.S),e.rXU(h.F),e.rXU(e.SKi),e.rXU(T.R))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ledger-criteria"]],outputs:{outputSelected:"outputSelected"},decls:52,vars:32,consts:[["inputAutoComplete","","triggerCompany","matAutocompleteTrigger"],["inputAutoComplete","","triggerSupplier","matAutocompleteTrigger"],["companies","matAutocomplete"],["suppliers","matAutocomplete"],["id","dialog"],["id","dialog-header"],["id","dialog-content"],["id","form",3,"formGroup"],["dataTabIndex","1","formControlName","company","matInput","",3,"keydown","keyup","inputTabStop","matAutocompleteDisabled","matAutocomplete"],["matSuffix","",2,"display","flex"],["mat-icon-button","","type","button",3,"click"],[1,"input-suffix","material-icons-outlined"],[4,"ngIf"],["dataTabIndex","2","formControlName","supplier","matInput","",3,"keydown","keyup","inputTabStop","matAutocompleteDisabled","matAutocomplete"],[3,"outputValues","parentDateRange"],["id","dialog-footer"],["id","align-right"],["mat-flat-button","","tabindex","-1",1,"transparent",3,"click"],["mat-flat-button","",1,"primary",3,"click","disabled"],["class","material-icons-outlined",4,"ngIf"],["autoActiveFirstOption","",3,"displayWith"],[3,"value",4,"ngFor","ngForOf"],[1,"material-icons-outlined"],[3,"value"]],template:function(o,i){if(1&o){const n=e.RV6();e.j41(0,"div",4)(1,"div",5)(2,"h1"),e.EFF(3),e.k0s(),e.j41(4,"h6"),e.EFF(5),e.k0s()(),e.j41(6,"div",6)(7,"form",7)(8,"mat-form-field")(9,"mat-label"),e.EFF(10),e.k0s(),e.j41(11,"input",8,0),e.bIt("keydown",function(s){return e.eBV(n),e.Njj(i.enableOrDisableAutoComplete(s))})("keyup",function(s){return e.eBV(n),e.Njj(i.checkForEmptyAutoComplete(s))}),e.k0s(),e.j41(14,"div",9)(15,"button",10),e.bIt("click",function(){e.eBV(n);const s=e.sdS(13);return e.Njj(i.openOrCloseAutoComplete(s,"company"))}),e.j41(16,"mat-icon",11),e.EFF(17,"expand_more"),e.k0s()()(),e.DNE(18,V,2,1,"mat-error",12)(19,U,2,1,"mat-error",12),e.k0s(),e.j41(20,"mat-form-field")(21,"mat-label"),e.EFF(22),e.k0s(),e.j41(23,"input",13,1),e.bIt("keydown",function(s){return e.eBV(n),e.Njj(i.enableOrDisableAutoComplete(s))})("keyup",function(s){return e.eBV(n),e.Njj(i.checkForEmptyAutoComplete(s))}),e.k0s(),e.j41(26,"div",9)(27,"button",10),e.bIt("click",function(){e.eBV(n);const s=e.sdS(25);return e.Njj(i.openOrCloseAutoComplete(s,"supplier"))}),e.j41(28,"mat-icon",11),e.EFF(29,"expand_more"),e.k0s()()(),e.DNE(30,J,2,1,"mat-error",12)(31,X,2,1,"mat-error",12),e.k0s(),e.j41(32,"date-range-picker",14),e.bIt("outputValues",function(s){return e.eBV(n),e.Njj(i.patchFormWithSelectedDateRange(s))}),e.k0s()()(),e.j41(33,"div",15)(34,"div",16)(35,"button",17),e.bIt("click",function(){return e.eBV(n),e.Njj(i.onClose())}),e.j41(36,"span"),e.EFF(37),e.nI1(38,"uppercase"),e.k0s()(),e.j41(39,"button",18),e.bIt("click",function(){return e.eBV(n),e.Njj(i.onSearch())}),e.DNE(40,H,2,0,"mat-icon",19),e.j41(41,"span"),e.EFF(42),e.nI1(43,"uppercase"),e.k0s()()()()(),e.j41(44,"mat-autocomplete",20,2),e.DNE(46,N,2,2,"mat-option",21),e.nI1(47,"async"),e.k0s(),e.j41(48,"mat-autocomplete",20,3),e.DNE(50,x,2,2,"mat-option",21),e.nI1(51,"async"),e.k0s()}if(2&o){const n=e.sdS(45),l=e.sdS(49);e.R7$(3),e.JRh(i.getLabel("header")),e.R7$(2),e.JRh(i.getLabel("subHeader")),e.R7$(2),e.Y8G("formGroup",i.form),e.R7$(3),e.JRh(i.getLabel("company")),e.R7$(),e.Y8G("inputTabStop",i.input)("matAutocompleteDisabled",i.isAutoCompleteDisabled)("matAutocomplete",n),e.R7$(7),e.Y8G("ngIf",i.company.hasError("required")),e.R7$(),e.Y8G("ngIf",!i.company.hasError("required")&&i.company.hasError("incorrect")),e.R7$(3),e.JRh(i.getLabel("supplier")),e.R7$(),e.Y8G("inputTabStop",i.input)("matAutocompleteDisabled",i.isAutoCompleteDisabled)("matAutocomplete",l),e.R7$(7),e.Y8G("ngIf",i.supplier.hasError("required")),e.R7$(),e.Y8G("ngIf",!i.supplier.hasError("required")&&i.supplier.hasError("incorrect")),e.R7$(),e.Y8G("parentDateRange",i.getDateRange()),e.R7$(5),e.JRh(e.bMT(38,24,i.getLabel("cancelButton"))),e.R7$(2),e.Y8G("disabled",!i.form.valid),e.R7$(),e.Y8G("ngIf",!i.form.valid),e.R7$(2),e.JRh(e.bMT(43,26,i.getLabel("okButton"))),e.R7$(2),e.Y8G("displayWith",i.autocompleteFields.bind(i,"description")),e.R7$(2),e.Y8G("ngForOf",e.bMT(47,28,i.dropdownCompanies)),e.R7$(2),e.Y8G("displayWith",i.autocompleteFields.bind(i,"description")),e.R7$(2),e.Y8G("ngForOf",e.bMT(51,30,i.dropdownSuppliers))}},dependencies:[d.Sq,d.bT,A,c.qT,c.me,c.BC,c.cb,j.i,L.B,w.$3,k.wT,w.pN,C.$z,C.iY,p.rl,p.nJ,p.TL,p.yw,O.An,M.fg,c.j4,c.JD,d.Jj,d.Pc],styles:["#dialog[_ngcontent-%COMP%]{background-color:var(--color-background);display:flex;flex-direction:column;height:100%;overflow:hidden;padding:0}#dialog-header[_ngcontent-%COMP%]{border-bottom:.0625rem solid color-mix(in srgb,var(--color-transparent-button-hover) 30%,transparent);display:flex;flex-direction:column;gap:.8rem;margin:0 0 1rem;padding:1.5rem 2rem 1rem}#dialog-header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--color-accent)}#dialog-header[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{color:var(--color-text)}#dialog-content[_ngcontent-%COMP%]{height:100%;margin:1rem 4rem 0!important;overflow-y:hidden}#dialog-footer[_ngcontent-%COMP%]{border-top:.0625rem solid color-mix(in srgb,var(--color-transparent-button-hover) 30%,transparent);display:flex;flex-direction:column;gap:.8rem;padding:1rem 2rem}#dialog-footer[_ngcontent-%COMP%]   #align-right[_ngcontent-%COMP%]{column-gap:.5rem;display:flex;margin:0 0 0 auto}"]})}}return r})();var _=a(97),W=a(5312),z=a(1626);let Z=(()=>{class r extends _.s{constructor(t){super(t,W.c.apiUrl+"/ledgers")}get(t){return this.http.request("post",this.url+"/buildLedger",{body:t})}static{this.\u0275fac=function(o){return new(o||r)(e.KVO(z.Qq))}}static{this.\u0275prov=e.jDH({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var K=a(4433),Q=a(5779),q=a(8520);function ee(r,m){if(1&r&&(e.j41(0,"tr")(1,"th",5),e.EFF(2),e.k0s(),e.j41(3,"th",6),e.EFF(4),e.k0s(),e.j41(5,"th",7),e.EFF(6),e.k0s(),e.j41(7,"th",8),e.EFF(8),e.k0s(),e.j41(9,"th",8),e.EFF(10),e.k0s(),e.j41(11,"th",8),e.EFF(12),e.k0s()()),2&r){const t=e.XpG();e.R7$(2),e.JRh(t.getLabel("headerDate")),e.R7$(2),e.JRh(t.getLabel("headerDocumentTypeDescription")),e.R7$(2),e.JRh(t.getLabel("headerInvoiceNo")),e.R7$(2),e.JRh(t.getLabel("headerDebit")),e.R7$(2),e.JRh(t.getLabel("headerCredit")),e.R7$(2),e.JRh(t.getLabel("headerBalance"))}}function te(r,m){if(1&r&&(e.j41(0,"tr",9)(1,"td",10)(2,"span",11),e.EFF(3),e.k0s()(),e.j41(4,"td",12)(5,"span"),e.EFF(6),e.k0s()(),e.j41(7,"td",13)(8,"span",11),e.EFF(9),e.k0s()(),e.j41(10,"td",14)(11,"span",15),e.EFF(12),e.k0s()(),e.j41(13,"td",14)(14,"span",15),e.EFF(15),e.k0s()(),e.j41(16,"td",14)(17,"span",15),e.EFF(18),e.k0s()()()),2&r){const t=m.$implicit,o=e.XpG();e.R7$(3),e.JRh(t.formattedDate),e.R7$(3),e.JRh(t.documentType.description),e.R7$(3),e.JRh(t.invoiceNo),e.R7$(3),e.JRh(o.formatNumberToLocale(t.debit)),e.R7$(3),e.JRh(o.formatNumberToLocale(t.credit)),e.R7$(3),e.JRh(o.formatNumberToLocale(t.balance))}}let re=(()=>{class r{constructor(t,o){this.localStorageService=t,this.messageLabelService=o,this.records=[],this.feature="ledger"}ngOnInit(){this.adjustTableHeight()}formatNumberToLocale(t,o=!0){return(0,d.ZV)(t,this.localStorageService.getItem("language"),o?"1.2":"1.0")}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}adjustTableHeight(){setTimeout(()=>{const t=document.getElementsByClassName("table-wrapper");for(let o=0;o<t.length;o++)t[o].style.height=document.getElementById("content").offsetHeight-150+"px"},100)}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(I.s),e.rXU(h.F))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ledgerShipOwnerTable"]],inputs:{records:"records",criteria:"criteria"},decls:5,vars:4,consts:[["table",""],[1,"table-wrapper",2,"overflow-y","scroll"],["dataKey","id","scrollHeight","flex","selectionMode","single","sortMode","multiple",3,"scrollable","virtualScrollItemSize","value","virtualScroll"],["pTemplate","header"],["pTemplate","body"],[1,"border-bottom","border-top","width-9"],[1,"border-bottom","width-50"],[1,"border-bottom","width-4"],[1,"border-bottom","width-6"],[2,"height","32px"],[1,"width-9"],[1,"center"],[1,"width-50"],[1,"width-4"],[1,"width-6"],[1,"number","right","with-right-padding"]],template:function(o,i){1&o&&(e.j41(0,"div",1)(1,"p-table",2,0),e.DNE(3,ee,13,6,"ng-template",3)(4,te,19,6,"ng-template",4),e.k0s()()),2&o&&(e.R7$(),e.Y8G("scrollable",!0)("virtualScrollItemSize",32)("value",i.records)("virtualScroll",!1))},dependencies:[Q.Ei,q.XI],styles:["#list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#content[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6.5px);backdrop-filter:blur(6.5px);background-color:var(--color-background);border-radius:1rem;border:.0625rem solid color-mix(in srgb,var(--color-border) 50%,transparent);display:flex;flex-direction:column;gap:.9375rem;height:100%;margin:0 auto;overflow-y:hidden;padding:1rem 1.6rem 1rem 2rem;transition:background-color var(--theme-delay);width:100%}#header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin:0 2rem 0 0}#table-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}#footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:right;padding:.875rem 2rem}#align-right[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}","#content[_ngcontent-%COMP%]{width:100%}#header-right[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row}#criteria-caption[_ngcontent-%COMP%]{color:var(--color-text);font-family:var(--font-family-asty);font-size:.875rem;font-weight:300;margin:.125rem .5rem 0 0;transition:color var(--theme-delay)!important}"]})}}return r})();function ie(r,m){if(1&r&&(e.j41(0,"div",9),e.nrm(1,"ledgerShipOwnerTable",10),e.k0s()),2&r){const t=e.XpG();e.R7$(),e.Y8G("records",t.records)("criteria",t.criteria)}}const oe=[{path:"",component:(()=>{class r{constructor(t,o,i,n,l,s,u){this.dateHelperService=t,this.helperService=o,this.interactionService=i,this.ledgerHttpService=n,this.messageLabelService=l,this.sessionStorageService=s,this.dialog=u,this.feature="ledgerParent",this.featureIcon="ledgers",this.parentUrl="/home",this.records=[]}ngOnInit(){this.setTabTitle(),this.subscribeToInteractionService(),this.setListHeight()}ngOnDestroy(){this.sessionStorageService.deleteItems([{item:"ledgerCriteria",when:"production"}])}getCriteria(){if(this.sessionStorageService.getItem("ledgerCriteria"))return this.criteriaForm=JSON.parse(this.sessionStorageService.getItem("ledgerCriteria"))?JSON.parse(this.sessionStorageService.getItem("ledgerCriteria")):null,this.criteriaForm?this.criteriaForm.company.description+", "+this.criteriaForm.supplier.description+", "+this.dateHelperService.formatISODateToLocale(this.criteria.fromDate)+" - "+this.dateHelperService.formatISODateToLocale(this.criteria.toDate):""}getLabel(t){return this.messageLabelService.getDescription(this.feature,t)}onShowCriteriaDialog(){this.dialog.open(Y,{height:"36.0625rem",panelClass:"dialog",width:"32rem"}).afterClosed().subscribe(o=>{void 0!==o&&(this.buildCriteriaVM(o),this.loadRecords(this.criteria))})}buildCriteriaVM(t){this.criteria={companyId:t.companyId,supplierId:t.supplierId,fromDate:t.fromDate,toDate:t.toDate}}loadRecords(t){this.ledgerHttpService.get({companyId:t.companyId,supplierId:t.supplierId,fromDate:t.fromDate,toDate:t.toDate}).subscribe(i=>{this.records=i,this.records.forEach(n=>{n.formattedDate=this.dateHelperService.formatISODateToLocale(n.date)})})}setListHeight(){setTimeout(()=>{document.getElementById("content").style.height=document.getElementById("list-wrapper").offsetHeight-64+"px"},100)}setTabTitle(){this.helperService.setTabTitle(this.feature)}subscribeToInteractionService(){this.interactionService.refreshTabTitle.subscribe(()=>{this.setTabTitle()}),this.interactionService.emitDateRange.subscribe(t=>{t&&(this.criteria.fromDate=t.fromDate,this.criteria.toDate=t.toDate)})}static{this.\u0275fac=function(o){return new(o||r)(e.rXU(b.c),e.rXU(R.wT),e.rXU(D.y),e.rXU(Z),e.rXU(h.F),e.rXU(T.R),e.rXU(f.bZ))}}static{this.\u0275cmp=e.VBU({type:r,selectors:[["ledger"]],decls:11,vars:6,consts:[["id","list-wrapper"],["id","content"],["id","header"],[3,"featureIcon","feature","icon","parentUrl"],["id","header-right"],["id","criteria-caption"],["mat-icon-button","",1,"fab","fab-with-no-background",3,"click"],[1,"material-icons-outlined"],[3,"ngIf"],["id","table-wrapper"],[3,"records","criteria"]],template:function(o,i){1&o&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2),e.nrm(3,"home-button-and-title",3),e.j41(4,"div",4)(5,"span",5),e.EFF(6),e.k0s(),e.j41(7,"button",6),e.bIt("click",function(){return i.onShowCriteriaDialog()}),e.j41(8,"mat-icon",7),e.EFF(9,"filter_alt"),e.k0s()()()(),e.DNE(10,ie,2,2,"ng-template",8),e.k0s()()),2&o&&(e.R7$(3),e.Y8G("featureIcon",i.featureIcon)("feature",i.feature)("icon",i.featureIcon)("parentUrl",i.parentUrl),e.R7$(3),e.JRh(i.getCriteria()),e.R7$(4),e.Y8G("ngIf",i.records.length>0))},dependencies:[d.bT,K.K,C.iY,O.An,re],styles:["#list-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}#content[_ngcontent-%COMP%]{-webkit-backdrop-filter:blur(6.5px);backdrop-filter:blur(6.5px);background-color:var(--color-background);border-radius:1rem;border:.0625rem solid color-mix(in srgb,var(--color-border) 50%,transparent);display:flex;flex-direction:column;gap:.9375rem;height:100%;margin:0 auto;overflow-y:hidden;padding:1rem 1.6rem 1rem 2rem;transition:background-color var(--theme-delay);width:100%}#header[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:space-between;margin:0 2rem 0 0}#table-wrapper[_ngcontent-%COMP%]{height:100%;width:100%}#footer[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row;justify-content:right;padding:.875rem 2rem}#align-right[_ngcontent-%COMP%]{display:flex;gap:.5rem;margin-left:auto}","#content[_ngcontent-%COMP%]{width:100%}#header-right[_ngcontent-%COMP%]{align-items:center;display:flex;flex-direction:row}#criteria-caption[_ngcontent-%COMP%]{color:var(--color-text);font-family:var(--font-family-asty);font-size:.875rem;font-weight:300;margin:.125rem .5rem 0 0;transition:color var(--theme-delay)!important}"]})}}return r})(),canActivate:[E.r],runGuardsAndResolvers:"always"}];let ae=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[y.iI.forChild(oe),y.iI]})}}return r})();var ne=a(8330);let se=(()=>{class r{static{this.\u0275fac=function(o){return new(o||r)}}static{this.\u0275mod=e.$C({type:r})}static{this.\u0275inj=e.G2t({imports:[ne.G,ae]})}}return r})()}}]);